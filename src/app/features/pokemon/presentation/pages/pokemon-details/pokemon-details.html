@if (pokemonDetails$ | async; as pokemon) {
  <div class="pokemon-details-wrapper">
    <div class="pokemon-details-card">
      <div class="details-header">
        <img [src]="pokemon.imageUrl" [alt]="pokemon.name" class="pokemon-image">
        <h2 class="pokemon-name">{{ pokemon.name }}</h2>
        <p class="pokemon-id">ID: {{ pokemon.id }}</p>
      </div>

      <div class="details-section">
        <h3 class="section-title">Details</h3>
        <ul class="section-list">
          <li>Types: {{ pokemon.types.join(', ') | titlecase }}</li>
          <li>Height: {{ pokemon.height }}</li>
          <li>Weight: {{ pokemon.weight }}</li>
          <li>Base Experience: {{ pokemon.base_experience }}</li>
        </ul>
      </div>

      <div class="details-section">
        <h3 class="section-title">Abilities</h3>
        <ul class="section-list">
          @for (ability of pokemon.abilities; track ability.name) {
            <li>{{ ability.name }} @if (ability.isHidden) { (Hidden) }</li>
          }
        </ul>
      </div>

      <div class="details-section">
        <app-stats-breakdown [stats]="pokemon.stats"></app-stats-breakdown>
      </div>

      @if (pokemonEvolution$ | async; as evolutionChain) {
        <div class="evolution-container">
          <h2>Evolution</h2>
          <div class="flex flex-wrap items-center justify-center space-x-4">
            @if (evolutionChain.chain.length > 0) {
              <app-evolution-chain-species [species]="evolutionChain.chain[0]"></app-evolution-chain-species>
            }
          </div>
        </div>
      }

    </div>
  </div>
} @else {
  <app-loading-screen/>
}
